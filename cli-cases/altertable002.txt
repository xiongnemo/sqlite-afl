.open --hexdb
| size 45056 pagesize 4096 filename altertable002.txt.db
| page 1 offset 0
|      0: 53 51 4c 69 74 65 20 66 6f 72 6d 61 74 20 33 00   SQLite format 3.
|     16: 10 00 01 01 00 40 20 20 00 00 00 00 00 00 00 0b   .....@  ........
|     32: 00 00 00 00 00 00 00 00 00 00 00 09 00 00 00 04   ................
|     48: 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00   ................
|     96: 00 00 00 00 0d 0f 47 00 0a 0c 75 00 0f 86 0f 4f   ......G...u....O
|    112: 0e 8e 0f 22 0e 4a 0e 17 0d 7c 0d 49 0c a8 0c 75   .....J...|.I...u
|   3184: 00 00 00 00 00 31 0a 06 17 13 11 01 4d 69 6e 64   .....1......Mind
|   3200: 65 78 74 34 75 74 34 0b 43 52 45 41 54 45 20 55   ext4ut4.CREATE U
|   3216: 4e 49 51 55 45 20 49 4e 44 45 58 20 74 34 75 20   NIQUE INDEX t4u 
|   3232: 4f 4e 20 74 34 28 75 29 81 1e 09 07 17 11 11 01   ON t4(u)........
|   3248: 82 27 74 61 62 6c 65 74 34 74 34 0a 43 52 45 41   .'tablet4t4.CREA
|   3264: 54 45 20 54 41 42 4c 45 20 74 34 28 0a 20 20 75   TE TABLE t4(.  u
|   3280: 20 49 4e 54 2c 0a 20 20 76 20 54 45 58 54 2c 0a    INT,.  v TEXT,.
|   3296: 20 20 46 4f 52 45 49 47 4e 20 4b 45 59 28 75 29     FOREIGN KEY(u)
|   3312: 20 52 45 46 45 52 45 4e 43 45 53 20 74 31 28 61    REFERENCES t1(a
|   3328: 29 2c 0a 20 20 46 4f 52 45 49 47 4e 20 4b 45 59   ),.  FOREIGN KEY
|   3344: 28 75 29 20 52 45 46 45 52 45 4e 43 45 53 20 74   (u) REFERENCES t
|   3360: 32 28 78 29 2c 0a 20 20 46 4f 52 45 49 47 4e 20   2(x),.  FOREIGN 
|   3376: 4b 45 59 28 75 29 20 52 45 46 45 52 45 4e 43 45   KEY(u) REFERENCE
|   3392: 53 20 74 33 28 65 29 0a 29 31 08 06 17 13 11 01   S t3(e).)1......
|   3408: 4d 69 6e 64 65 78 74 33 65 74 33 09 43 52 45 41   Mindext3et3.CREA
|   3424: 54 45 20 55 4e 49 51 55 45 20 49 4e 44 45 58 20   TE UNIQUE INDEX 
|   3440: 74 33 65 20 4f 4e 20 74 33 28 65 29 81 18 07 07   t3e ON t3(e)....
|   3456: 17 11 11 01 82 1b 74 61 62 6c 65 74 33 74 33 08   ......tablet3t3.
|   3472: 43 52 45 41 54 45 20 54 41 42 4c 45 20 74 33 28   CREATE TABLE t3(
|   3488: 0a 20 20 64 20 49 4e 54 45 47 45 52 2c 0a 20 20   .  d INTEGER,.  
|   3504: 65 20 49 4e 54 45 47 45 52 2c 0a 20 20 66 20 49   e INTEGER,.  f I
|   3520: 4e 54 45 47 45 52 2c 0a 20 20 50 52 49 4d 41 52   NTEGER,.  PRIMAR
|   3536: 59 20 4b 45 59 28 64 29 2c 0a 20 20 43 48 45 43   Y KEY(d),.  CHEC
|   3552: 4b 28 20 74 33 2e 65 2b 74 33 2e 66 21 3d 34 32   K( t3.e+t3.f!=42
|   3568: 20 29 2c 0a 20 20 46 4f 52 45 49 47 4e 20 4b 45    ),.  FOREIGN KE
|   3584: 59 28 64 29 20 52 45 46 45 52 45 4e 43 45 53 20   Y(d) REFERENCES 
|   3600: 74 31 28 61 29 0a 29 31 06 06 17 13 11 01 4d 69   t1(a).)1......Mi
|   3616: 6e 64 65 78 74 32 78 74 32 07 43 52 45 41 54 45   ndext2xt2.CREATE
|   3632: 20 55 4e 49 51 55 45 20 49 4e 44 45 58 20 74 32    UNIQUE INDEX t2
|   3648: 78 20 4f 4e 20 74 32 28 78 29 42 05 06 17 15 11   x ON t2(x)B.....
|   3664: 01 6d 69 6e 64 65 78 74 32 78 31 74 32 06 43 52   .mindext2x1t2.CR
|   3680: 45 41 54 45 20 49 4e 44 45 58 20 74 32 78 31 20   EATE INDEX t2x1 
|   3696: 4f 4e 20 74 32 28 78 2b 7a 29 20 57 48 45 52 45   ON t2(x+z) WHERE
|   3712: 20 78 20 49 53 20 4e 4f 54 20 4e 55 4c 4c 81 11    x IS NOT NULL..
|   3728: 03 07 17 11 11 01 82 0d 74 61 62 6c 65 74 32 74   ........tablet2t
|   3744: 32 04 43 52 45 41 54 45 20 54 41 42 4c 45 20 74   2.CREATE TABLE t
|   3760: 32 28 0a 20 20 77 20 54 45 58 54 20 50 52 49 4d   2(.  w TEXT PRIM
|   3776: 41 52 59 20 4b 45 59 2c 0a 20 20 78 20 49 4e 54   ARY KEY,.  x INT
|   3792: 45 47 45 52 2c 0a 20 20 79 20 54 45 58 54 2c 0a   EGER,.  y TEXT,.
|   3808: 20 20 7a 20 49 4e 54 20 52 45 46 45 52 45 4e 43     z INT REFERENC
|   3824: 45 53 20 74 31 28 61 29 2c 0a 20 20 46 4f 52 45   ES t1(a),.  FORE
|   3840: 49 47 4e 20 4b 45 59 20 28 78 2c 79 29 20 52 45   IGN KEY (x,y) RE
|   3856: 46 45 52 45 4e 43 45 53 20 74 31 28 62 2c 63 29   FERENCES t1(b,c)
|   3872: 0a 29 23 04 06 17 37 11 01 00 69 6e 64 65 78 73   .)#...7...indexs
|   3888: 71 6c 69 74 65 5f 61 75 74 6f 69 6e 64 65 78 5f   qlite_autoindex_
|   3904: 74 32 5f 31 74 32 05 00 00 00 08 00 00 00 00 35   t2_1t2.........5
|   3920: 02 06 17 15 11 01 53 69 6e 64 65 78 74 31 62 63   ......Sindext1bc
|   3936: 74 31 03 43 52 45 41 54 45 20 55 4e 49 51 55 45   t1.CREATE UNIQUE
|   3952: 20 49 4e 44 45 58 20 74 31 62 63 20 4f 4e 20 74    INDEX t1bc ON t
|   3968: 31 28 62 2c 63 29 78 01 07 17 11 11 01 81 5b 74   1(b,c)x.......[t
|   3984: 61 62 6c 65 74 31 74 31 02 43 52 45 41 54 45 20   ablet1t1.CREATE 
|   4000: 54 41 42 4c 45 20 74 31 28 0a 20 20 61 20 49 4e   TABLE t1(.  a IN
|   4016: 54 45 47 45 52 20 50 52 49 4d 41 52 59 20 4b 45   TEGER PRIMARY KE
|   4032: 59 2c 0a 20 20 62 20 49 4e 54 45 47 45 52 2c 0a   Y,.  b INTEGER,.
|   4048: 20 20 63 20 54 45 58 54 2c 0a 20 20 43 48 45 43     c TEXT,.  CHEC
|   4064: 4b 28 20 74 31 2e 62 3e 3d 30 20 41 4e 44 20 6d   K( t1.b>=0 AND m
|   4080: 61 69 6e 2e 74 31 2e 62 3c 3d 39 39 20 29 0a 29   ain.t1.b<=99 ).)
| page 2 offset 4096
|      0: 0d 00 00 00 03 0f db 00 0f f4 0f db 0f ea 00 00   ................
|   4048: 00 00 00 00 00 00 00 00 00 00 00 0d 02 04 00 01   ................
|   4064: 1d 63 69 6e 66 69 6e 69 74 79 08 04 04 00 01 13   .cinfinity......
|   4080: 05 73 69 78 0a 01 04 00 01 17 02 74 68 72 65 65   .six.......three
| page 3 offset 8192
|      0: 0a 00 00 00 03 0f dc 00 0f f5 0f eb 0f dc 00 00   ................
|   4048: 00 00 00 00 00 00 00 00 00 00 00 00 0e 04 01 1d   ................
|   4064: 01 63 69 6e 66 69 6e 69 74 79 02 09 04 01 13 01   .cinfinity......
|   4080: 05 73 69 78 04 0a 04 01 17 09 02 74 68 72 65 65   .six.......three
| page 4 offset 12288
|      0: 0d 00 00 00 01 0f e5 00 0f e5 00 00 00 00 00 00   ................
|   4064: 00 00 00 00 00 19 01 05 27 01 17 01 61 6c 74 65   ........'...alte
|   4080: 72 74 61 62 6c 65 31 30 61 02 74 68 72 65 65 04   rtable10a.three.
| page 5 offset 16384
|      0: 0a 00 00 00 01 0f ef 00 0f ef 00 00 00 00 00 00   ................
|   4064: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 10   ................
|   4080: 03 27 09 61 6c 74 65 72 74 61 62 6c 65 31 30 61   .'.altertable10a
| page 6 offset 20480
|      0: 0a 00 00 00 01 0f fb 00 0f fb 00 00 00 00 00 00   ................
|   4080: 00 00 00 00 00 00 00 00 00 00 00 04 03 01 09 06   ................
| page 7 offset 24576
|      0: 0a 00 00 00 01 0f fb 00 0f fb 00 00 00 00 00 00   ................
|   4080: 00 00 00 00 00 00 00 00 00 00 00 04 03 01 09 02   ................
| page 8 offset 28672
|      0: 0d 00 00 00 01 0f f8 00 0f f8 00 00 00 00 00 00   ................
|   4080: 00 00 00 00 00 00 00 00 06 01 04 00 01 01 02 32   ...............2
| page 9 offset 32768
|      0: 0a 00 00 00 01 0f fb 00 0f fb 00 00 00 00 00 00   ................
|   4080: 00 00 00 00 00 00 00 00 00 00 00 04 03 01 09 02   ................
| page 10 offset 36864
|      0: 0d 00 00 00 01 0f ef 00 0f ef 00 00 00 00 00 00   ................
|   4064: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0f   ................
|   4080: 01 03 01 23 02 73 63 75 70 70 65 72 6e 6f 6e 67   ...#.scuppernong
| page 11 offset 40960
|      0: 0a 00 00 00 01 0f fb 00 0f fb 00 00 00 00 00 00   ................
|   4080: 00 00 00 00 00 00 00 00 00 00 00 04 03 01 09 02   ................
| end altertable002.txt.db
.testctrl prng_seed 1 db
.testctrl internal_functions
PRAGMA foreign_keys=ON;
SELECT w FROM t2 WHERE x+z=6 AND x!=5;
INSERT INTO t1(a,b) VALUES(1000,-1);
INSERT INTO t1(a,b) VALUES(1000,100);
ALTER TABLE t1 RENAME a TO aaa;
ALTER TABLE t1 RENAME COLUMN b TO "bbb";
ALTER TABLE t2 RENAME x TO xyz;
SELECT name FROM pragma_table_info('t2');
ALTER TABLE t2 RENAME y TO yzx;
PRAGMA foreign_key_check;
SELECT name FROM pragma_table_info('t2');
SELECT "from", printf('%s.%s',"table","to")
  FROM pragma_foreign_key_list('t2')
 ORDER BY 1, 2;
SELECT w FROM t2 WHERE xyz+z=6 AND xyz<>5;

