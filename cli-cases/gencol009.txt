.open --hexdb
| size 12288 pagesize 4096 filename gencol009.txt.db
| page 1 offset 0
|      0: 53 51 4c 69 74 65 20 66 6f 72 6d 61 74 20 33 00   SQLite format 3.
|     16: 10 00 01 01 00 40 20 20 00 00 00 00 00 00 00 03   .....@  ........
|     32: 00 00 00 00 00 00 00 00 00 00 00 03 00 00 00 04   ................
|     48: 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00   ................
|     96: 00 00 00 00 0d 00 00 00 03 0e b9 00 0f 70 0f 23   .............p.#
|    112: 0e b9 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
|   3760: 00 00 00 00 00 00 00 00 00 68 03 07 1b 11 11 08   .........h......
|   3776: 81 39 74 72 69 67 67 65 72 72 31 74 31 43 52 45   .9triggerr1t1CRE
|   3792: 41 54 45 20 54 52 49 47 47 45 52 20 72 31 20 42   ATE TRIGGER r1 B
|   3808: 45 46 4f 52 45 20 49 4e 53 45 52 54 20 4f 4e 20   EFORE INSERT ON 
|   3824: 74 31 20 42 45 47 49 4e 0a 20 20 49 4e 53 45 52   t1 BEGIN.  INSER
|   3840: 54 20 49 4e 54 4f 20 6c 6f 67 20 56 41 4c 55 45   T INTO log VALUE
|   3856: 53 28 6e 65 77 2e 62 2c 6e 65 77 2e 63 29 3b 0a   S(new.b,new.c);.
|   3872: 45 4e 44 4b 02 06 17 13 13 01 7f 74 61 62 6c 65   ENDK.......table
|   3888: 6c 6f 67 6c 6f 67 03 43 52 45 41 54 45 20 54 41   loglog.CREATE TA
|   3904: 42 4c 45 20 6c 6f 67 28 78 2c 79 2c 6d 31 20 41   BLE log(x,y,m1 A
|   3920: 53 20 28 78 2b 79 29 2c 20 6d 32 20 41 53 20 28   S (x+y), m2 AS (
|   3936: 32 2a 78 2b 33 2a 79 29 20 53 54 4f 52 45 44 29   2*x+3*y) STORED)
|   3952: 81 0d 01 07 17 11 11 01 82 05 74 61 62 6c 65 74   ..........tablet
|   3968: 31 74 31 02 43 52 45 41 54 45 20 54 41 42 4c 45   1t1.CREATE TABLE
|   3984: 20 74 31 28 0a 20 20 61 20 49 4e 54 2c 0a 20 20    t1(.  a INT,.  
|   4000: 62 20 47 45 4e 45 52 41 54 45 44 20 41 4c 57 41   b GENERATED ALWA
|   4016: 59 53 20 41 53 20 28 61 62 73 28 61 2a 64 29 29   YS AS (abs(a*d))
|   4032: 20 53 54 4f 52 45 44 2c 0a 20 20 63 20 47 45 4e    STORED,.  c GEN
|   4048: 45 52 41 54 45 44 20 41 4c 57 41 59 53 20 41 53   ERATED ALWAYS AS
|   4064: 20 28 61 62 73 28 61 2a 31 30 2f 64 29 29 20 53    (abs(a*10/d)) S
|   4080: 54 4f 52 45 44 2c 0a 20 20 64 20 49 4e 54 0a 29   TORED,.  d INT.)
| page 2 offset 4096
|      0: 0d 00 00 00 03 0f df 00 0f f4 0f ea 0f df 00 00   ................
|   4048: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 09   ................
|   4064: 03 05 01 01 01 01 f9 69 04 0f 08 02 05 01 01 01   .......i........
|   4080: 09 04 04 28 0a 01 05 01 02 01 01 0a 00 c8 05 14   ...(............
| page 3 offset 8192
|      0: 0d 00 00 00 00 10 00 00 00 00 00 00 00 00 00 00   ................
| end gencol009.txt.db
.testctrl prng_seed 1 db
.testctrl internal_functions
INSERT INTO t1(a,d) VALUES(5,30);
DROP TRIGGER r1;
DELETE FROM t1;
INSERT INTO t1 VALUES(5,30);
CREATE TRIGGER r1 BEFORE UPDATE OF a ON t1 BEGIN
  INSERT INTO log(x,y) VALUES(old.a,new.a);
END;
DELETE FROM log;
UPDATE t1 SET a=b, d=2;
SELECT log.*, '|', t1.* FROM log, t1;

